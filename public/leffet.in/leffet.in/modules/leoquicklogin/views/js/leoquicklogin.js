function callLoginForm(l){var e=l.parents(".leo-quicklogin-form");l.hasClass("lql-callreset-action")&&!e.find(".leoquicklogin-forgotpass").hasClass("active")&&e.find(".leoquicklogin-forgotpass").trigger("click"),e.find(".leo-login-form").removeClass("leo-form-inactive").addClass("leo-form-active"),e.find(".leo-register-form").removeClass("leo-form-active").addClass("leo-form-inactive"),e.find(".lql-bt.lql-active").removeClass("lql-active"),e.find(".lql-bt-login").addClass("lql-active")}function callRegisterForm(l){var e=l.parents(".leo-quicklogin-form");e.find(".leo-register-form").removeClass("leo-form-inactive").addClass("leo-form-active"),e.find(".leo-login-form").removeClass("leo-form-active").addClass("leo-form-inactive"),e.find(".lql-bt.lql-active").removeClass("lql-active"),e.find(".lql-bt-register").addClass("lql-active")}function activeEventSlidebarLeoQuickLogin(){$(".leoquicklogin-mask, .leoquicklogin-slidebar-close").click(function(){$(".leoquicklogin-mask.active").removeClass("active"),$(".leo-quicklogin.active").removeClass("active"),$("body.leoquicklogin-active-push main").css({"-moz-transform":"translateY(0px)","-webkit-transform":"translateY(0px)","-o-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"}),setTimeout(function(){$("body").removeClass("leoquicklogin-active-slidebar leoquicklogin-active-push"),lql_is_gen_rtl&&1==prestashop.language.is_rtl&&$("body").removeClass("lql_is_gen_rtl")},300),$(".leoquicklogin-slidebar.active").removeClass("active")})}function activeEventModalLeoQuickLogin(){$(".leo-quicklogin-modal").on("hide.bs.modal",function(l){$(".leo-quicklogin.active").removeClass("active")})}function validateEmail(l){return/^[a-z\p{L}0-9!#$%&'*+\/=?^`{}|~_-]+[.a-z\p{L}0-9!#$%&'*+\/=?^`{}|~_-]*@[a-z\p{L}0-9]+[._a-z\p{L}0-9-]*\.[a-z\p{L}0-9]+$/i.test(l)}function doFbLogin(){FB.login(function(l){"connected"===l.status?processFbAPI():console.log("Please log into this app.")},{scope:"public_profile,email"})}function processFbAPI(){$(".leo-quicklogin-modal").modal("hide"),$(".leoquicklogin-mask").trigger("click"),setTimeout(function(){FB.api("/me?fields=email,birthday,first_name,last_name,name,gender",function(l){l.email?($(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.lql-social-loading").addClass("active"),$(".lql-social-modal").modal("show"),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:{ajax:1,action:"social-login",email:l.email,first_name:l.first_name,last_name:l.last_name},success:function(l){$(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$.parseJSON(l).errors.length?$(".lql-social-modal .lql-social-modal-mesg.error-login").addClass("active"):($(".lql-social-modal .lql-social-modal-mesg.success").addClass("active"),lql_redirect?window.location.replace(lql_myaccount_url):location.reload())},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})):($(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.error-email").addClass("active"),$(".lql-social-modal").modal("show"),FB.api("/me/permissions","delete",function(l){}))})},300)}function attachGoogleSignin(){$(".google-login-bt").each(function(){auth2.attachClickHandler(this,{},function(l){var e=l.getBasicProfile();$(".leo-quicklogin-modal").modal("hide"),$(".leoquicklogin-mask").trigger("click"),setTimeout(function(){e.getEmail()?($(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.lql-social-loading").addClass("active"),$(".lql-social-modal").modal("show"),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:{ajax:1,action:"social-login",email:e.getEmail(),first_name:e.getGivenName(),last_name:e.getFamilyName()},success:function(l){$(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$.parseJSON(l).errors.length?$(".lql-social-modal .lql-social-modal-mesg.error-login").addClass("active"):($(".lql-social-modal .lql-social-modal-mesg.success").addClass("active"),lql_redirect?window.location.replace(lql_myaccount_url):location.reload())},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})):($(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.error-email").addClass("active"),$(".lql-social-modal").modal("show"),auth2.disconnect())},300)},function(l){console.log(l)})})}function twitterLogin(l,e,a){$(".leo-quicklogin-modal").modal("hide"),$(".leoquicklogin-mask").trigger("click"),setTimeout(function(){a.length?(""==e&&(e="Mr/Ms"),$(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.lql-social-loading").addClass("active"),$(".lql-social-modal").modal("show"),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:{ajax:1,action:"social-login",email:a,first_name:l,last_name:e},success:function(l){$(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$.parseJSON(l).errors.length?$(".lql-social-modal .lql-social-modal-mesg.error-login").addClass("active"):($(".lql-social-modal .lql-social-modal-mesg.success").addClass("active"),lql_redirect?window.location.replace(lql_myaccount_url):location.reload())},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})):($(".lql-social-modal .lql-social-modal-mesg").removeClass("active"),$(".lql-social-modal .lql-social-modal-mesg.error-email").addClass("active"),$(".lql-social-modal").modal("show"))},300)}$(document).ready(function(){if($(".leoquicklogin-slidebar").length){for(var l=0;l<3;l++){$(".leoquicklogin-slidebar").first().clone().insertAfter(".leoquicklogin-slidebar:last");var e="";switch(1==leo_push&&(e="push_"),l){case 0:e+="slidebar_right";break;case 1:e+="slidebar_top";break;case 2:e+="slidebar_bottom"}$(".leoquicklogin-slidebar").last().addClass(e)}1==leo_push?$(".leoquicklogin-slidebar").first().addClass("push_slidebar_left"):$(".leoquicklogin-slidebar").first().addClass("slidebar_left")}$(".leo-quicklogin").click(function(){var l,e,a,o,s,i;$(this).hasClass("leo-dropdown")||$(this).hasClass("active")||($(this).addClass("active"),l=$(this).data("type"),e=$(this).data("layout"),a=$(this).data("enable-sociallogin"),"popup"==l&&(""==a||"enable"==a?$(".leo-quicklogin-modal .lql-social-login").show():$(".leo-quicklogin-modal .lql-social-login").hide(),"both"!=e?($(".leo-quicklogin-modal .lql-bt").removeClass("lql-active"),$(".leo-quicklogin-modal .lql-bt-"+e).addClass("lql-active"),$(".leo-quicklogin-modal .lql-action").show(),$(".leo-quicklogin-modal .leo-form").removeClass("leo-form-active full-width").addClass("leo-form-inactive full-width"),$(".leo-quicklogin-modal .leo-"+e+"-form").removeClass("leo-form-inactive").addClass("leo-form-active full-width")):($(".leo-quicklogin-modal .lql-action").hide(),$(".leo-quicklogin-modal .leo-form").removeClass("leo-form-inactive full-width").addClass("leo-form-active")),$(".leo-quicklogin-modal").modal("show")),"slidebar_left"!=l&&"slidebar_right"!=l&&"slidebar_top"!=l&&"slidebar_bottom"!=l||(""==a||"enable"==a?$(".leoquicklogin-slidebar .lql-social-login").show():$(".leoquicklogin-slidebar .lql-social-login").hide(),o=l,1==leo_push&&(o="push_"+o),"both"!=e?($(".leoquicklogin-slidebar .lql-bt").removeClass("lql-active"),$(".leoquicklogin-slidebar .lql-bt-"+e).addClass("lql-active"),$(".leoquicklogin-slidebar .lql-action").show(),$(".leoquicklogin-slidebar."+o+" .leo-form").removeClass("leo-form-active full-width").addClass("leo-form-inactive full-width"),$(".leoquicklogin-slidebar."+o+" .leo-"+e+"-form").removeClass("leo-form-inactive").addClass("leo-form-active full-width")):($(".leoquicklogin-slidebar .lql-action").hide(),$(".leoquicklogin-slidebar."+o+" .leo-form").removeClass("leo-form-inactive full-width").addClass("leo-form-active")),$(".leoquicklogin-slidebar."+o).addClass("active"),$(".leoquicklogin-mask").addClass("active"),$("body").addClass("leoquicklogin-active-slidebar"),lql_is_gen_rtl&&1==prestashop.language.is_rtl&&$("body").addClass("lql_is_gen_rtl"),1==leo_push&&($("body").addClass("leoquicklogin-active-push"),"slidebar_left"!=l&&"slidebar_right"!=l||(i="X","slidebar_left"==l&&(s=$(".leoquicklogin-slidebar."+o).outerWidth()),"slidebar_right"==l&&(s=-$(".leoquicklogin-slidebar."+o).outerWidth())),"slidebar_top"!=l&&"slidebar_bottom"!=l||(i="Y","slidebar_top"==l&&(s=$(".leoquicklogin-slidebar."+o).outerHeight()),"slidebar_bottom"==l&&(s=-$(".leoquicklogin-slidebar."+o).outerHeight())),$("body.leoquicklogin-active-push main").css({"-moz-transform":"translate"+i+"("+s+"px)","-webkit-transform":"translate"+i+"("+s+"px)","-o-transform":"translate"+i+"("+s+"px)","-ms-transform":"translate"+i+"("+s+"px)",transform:"translate"+i+"("+s+"px)"}))))}),activeEventModalLeoQuickLogin(),activeEventSlidebarLeoQuickLogin(),$(".leo-dropdown-wrapper").click(function(l){l.stopPropagation()}),$(".leoquicklogin-forgotpass").click(function(){var l=$(this).parents(".leo-login-form");return $(this).hasClass("active")?($(this).removeClass("active"),l.find(".leo-resetpass-form").slideUp("fast",function(){})):($(this).addClass("active"),l.find(".leo-resetpass-form").slideDown("fast",function(){})),!1}),$(".lql-calllogin-action").click(function(){return callLoginForm($(this)),!1}),$(".lql-callregister-action").click(function(){return callRegisterForm($(this)),!1}),$(".lql-bt").click(function(){$(this).hasClass("active")||($(this).hasClass("lql-bt-login")&&callLoginForm($(this)),$(this).hasClass("lql-bt-register")&&callRegisterForm($(this)))}),$(".leo-resetpass-form-content").submit(function(){if($(this).find(".leoquicklogin-reset-pass-bt").hasClass("validate-ok")||$(this).find(".leo-has-error").length)return!1}),$(".leoquicklogin-reset-pass-bt").click(function(){var a,o,s;$(this).hasClass("active")||$(this).hasClass("success")||(a=$(this),(o=a.parents(".leo-resetpass-form-content")).find(".lql-form-mesg.has-danger").fadeOut(),o.find(".lql-form-mesg.has-success").fadeOut(),a.addClass("active"),a.find(".lql-bt-txt").hide(),a.find(".leoquicklogin-loading").css({display:"block"}),o.find("input").each(function(){return $(this).val()&&validateEmail($(this).val())?void $(this).parent(".form-group").removeClass("leo-has-error"):($(this).parent(".form-group").addClass("leo-has-error"),a.removeClass("active"),a.find(".lql-bt-txt").show(),a.find(".leoquicklogin-loading").hide(),!1)}),o.find(".leo-has-error").length||(o.find(".leoquicklogin-reset-pass-bt").addClass("validate-ok"),s=$.trim(o.find(".lql-email-reset").val()),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:{ajax:1,action:"reset-pass","lql-email-reset":s},success:function(l){o.find(".lql-form-mesg.has-danger").empty(),o.find(".lql-form-mesg.has-success").empty();var e=$.parseJSON(l);a.removeClass("active"),a.find(".leoquicklogin-loading").hide(),e.errors.length?($.each(e.errors,function(l,e){o.find(".lql-form-mesg.has-danger").append('<label class="form-control-label">'+e+"</label>")}),o.find(".lql-form-mesg.has-danger").fadeIn(),a.find(".lql-bt-txt").show()):(o.find(".lql-form-content-element").slideUp(function(){$(this).remove()}),o.find(".lql-form-mesg.has-success").append('<label class="form-control-label">'+e.success[0]+"<strong>"+s+"</strong></label>"),o.find(".lql-form-mesg.has-success").fadeIn(),a.find(".leoquicklogin-success-icon").fadeIn(),a.addClass("success"))},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})))}),$(".leo-login-form-content").submit(function(){if($(this).find(".lql-login-bt").hasClass("validate-ok")||$(this).find(".leo-has-error").length)return!1}),$(".lql-login-bt").click(function(){var a,o,l,e,s,i;$(this).hasClass("active")||$(this).hasClass("success")||(a=$(this),(o=a.parents(".leo-login-form-content")).find(".lql-form-mesg.has-danger").fadeOut(),o.find(".lql-form-mesg.has-success").fadeOut(),a.addClass("active"),a.find(".lql-bt-txt").hide(),a.find(".leoquicklogin-loading").css({display:"block"}),o.find("input").each(function(){!$(this).val()||$(this).hasClass("lql-email-login")&&!validateEmail($(this).val())?$(this).parent(".form-group").addClass("leo-has-error"):$(this).parent(".form-group").removeClass("leo-has-error")}),o.find(".leo-has-error").length?(a.removeClass("active"),a.find(".lql-bt-txt").show(),a.find(".leoquicklogin-loading").hide()):(o.find(".lql-login-bt").addClass("validate-ok"),l=$.trim(o.find(".lql-email-login").val()),e=$.trim(o.find(".lql-pass-login").val()),(s={ajax:1,action:"customer-login"}).lql_email_login=l,s.lql_pass_login=e,o.find(".lql-rememberme").length&&(i=o.find(".lql-rememberme").is(":checked")?1:0,s.lql_remember_login=i),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:s,success:function(l){o.find(".lql-form-mesg.has-danger").empty(),o.find(".lql-form-mesg.has-success").empty();var e=$.parseJSON(l);a.removeClass("active"),a.find(".leoquicklogin-loading").hide(),e.errors.length?($.each(e.errors,function(l,e){o.find(".lql-form-mesg.has-danger").append('<label class="form-control-label">'+e+"</label>")}),o.find(".lql-form-mesg.has-danger").fadeIn(),a.find(".lql-bt-txt").show()):(o.find(".lql-form-content-element").slideUp(function(){$(this).remove()}),o.find(".lql-form-mesg.has-success").append('<label class="form-control-label"><strong>'+e.success[0]+"</strong></label>"),o.find(".lql-form-mesg.has-success").fadeIn(),a.find(".leoquicklogin-success-icon").show(),a.addClass("success"),lql_redirect?window.location.replace(lql_myaccount_url):location.reload())},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})))}),$(".leo-register-form-content").submit(function(){if($(this).find(".lql-register-bt").hasClass("validate-ok")||$(this).find(".leo-has-error").length)return!1}),$(".lql-register-bt").click(function(){var a,o,l,e,s,i;$(this).hasClass("active")||$(this).hasClass("success")||(a=$(this),(o=a.parents(".leo-register-form-content")).find(".lql-form-mesg.has-danger").fadeOut(),o.find(".lql-form-mesg.has-success").fadeOut(),a.addClass("active"),a.find(".lql-bt-txt").hide(),a.find(".leoquicklogin-loading").css({display:"block"}),o.find("input").each(function(){$(this).val()?($(this).hasClass("lql-register-check")&&!$(this).is(":checked")?$(this).parent(".form-group").addClass("leo-has-error"):$(this).parent(".form-group").removeClass("leo-has-error"),$(this).hasClass("lql-register-email")&&(validateEmail($(this).val())?$(this).parent(".form-group").removeClass("leo-has-error"):$(this).parent(".form-group").addClass("leo-has-error"))):$(this).parent(".form-group").addClass("leo-has-error")}),o.find(".leo-has-error").length?(a.removeClass("active"),a.find(".lql-bt-txt").show(),a.find(".leoquicklogin-loading").hide()):(o.find(".lql-register-bt").addClass("validate-ok"),l=$.trim(o.find(".lql-register-firstname").val()),e=$.trim(o.find(".lql-register-lastname").val()),s=$.trim(o.find(".lql-register-email").val()),i=$.trim(o.find(".lql-register-pass").val()),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:lql_ajax_url,async:!0,cache:!1,data:{ajax:1,action:"create-account","lql-register-firstname":l,"lql-register-lastname":e,"lql-register-email":s,"lql-register-pass":i},success:function(l){o.find(".lql-form-mesg.has-danger").empty(),o.find(".lql-form-mesg.has-success").empty();var e=$.parseJSON(l);a.removeClass("active"),a.find(".leoquicklogin-loading").hide(),e.errors.length?($.each(e.errors,function(l,e){o.find(".lql-form-mesg.has-danger").append('<label class="form-control-label">'+e+"</label><br/>")}),o.find(".lql-form-mesg.has-danger").fadeIn(),a.find(".lql-bt-txt").show()):(o.find(".lql-form-content-element").slideUp(function(){$(this).remove()}),o.find(".lql-form-mesg.has-success").append('<label class="form-control-label"><strong>'+e.success[0]+"</strong></label>"),o.find(".lql-form-mesg.has-success").fadeIn(),a.find(".leoquicklogin-success-icon").show(),a.addClass("success"),lql_redirect?window.location.replace(lql_myaccount_url):location.reload())},error:function(l,e,a){console.log("TECHNICAL ERROR: \n\nDetails:\nError thrown: "+l+"\nText status: "+e)}})))}),"undefined"!=typeof google_client_id&&google_client_id.length&&gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:google_client_id,cookiepolicy:"single_host_origin",scope:"profile email"}),attachGoogleSignin()}),$(".twitter-login-bt").click(function(){window.open(lql_module_dir+"twitter.php?request=twitter&lang="+prestashop.language.iso_code,"_blank","toolbar=yes, scrollbars=yes, resizable=yes, top=100, left=300, width=700, height=600")})});