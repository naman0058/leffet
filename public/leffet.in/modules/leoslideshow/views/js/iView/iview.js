!function(b,i,g){function o(e,s){var a=this;a.options=s,a.sliderContent=e,a.sliderInner=a.sliderContent.html(),a.sliderContent.html("<div class='iviewSlider'>"+a.sliderInner+"</div>"),a.slider=b(".iviewSlider",a.sliderContent),a.slider.css("position","relative"),a.slider.css("height",s.height+"px"),a.defs={slide:0,total:0,image:"",images:[],width:a.sliderContent.width(),height:a.sliderContent.height(),timer:s.timer.toLowerCase(),lock:!1,paused:!s.autoAdvance,time:s.pauseTime,easing:s.easing},a.disableSelection(a.slider[0]),a.slides=a.slider.children(),a.slides.each(function(e){var i,t,o=b(this);a.defs.images.push(o.data("leo_image")),o.data("leo_thumbnail")&&a.defs.images.push(o.data("leo_thumbnail")),o.css("display","none"),"video"==o.data("leo_type")&&(i=o.children().eq(0),t=b('<div class="iview-video-show"><div class="iview-video-container"><a class="iview-video-close" title="'+s.closeLabel+'">&#735;</a></div></div>'),o.append(t),i.appendTo(b("div.iview-video-container",t)),t.css({width:"100%",height:a.defs.height,top:"-"+a.defs.height+"px"}).hide(),o.addClass("iview-video").css({cursor:"pointer"})),a.defs.total++}).css({width:a.defs.width,height:a.defs.height}),a.sliderContent.append('<div class="iview-preloader"><div></div></div>');var i=b(".iview-preloader",a.sliderContent),o=b("div",i);i.css({top:a.defs.height/2-i.height()/2+"px",left:a.defs.width/2-i.width()/2+"px"}),a.sliderContent.append('<div class="iview-timer"><div></div></div>'),a.iviewTimer=b(".iview-timer",a.sliderContent),a.iviewTimer.hide(),b(".tp-caption",a.slider).each(function(e){var i=b(this);i.html('<div class="caption-contain">'+i.html()+"</div>")}),s.startSlide=s.randomStart?Math.floor(Math.random()*a.defs.total):s.startSlide,s.startSlide=0<s.startSlide&&s.startSlide>=a.defs.total?a.defs.total-1:s.startSlide,a.defs.slide=s.startSlide,a.defs.image=a.slides.eq(a.defs.slide),a.defs.time=s.pauseTime&&0!=s.pauseTime?s.pauseTime:5e3,a.defs.easing=a.defs.image.data("leo_easing")?a.defs.image.data("leo_easing"):s.easing,a.pieDegree=0;var r,n,d,l,c,p,h,f=s.timerPadding,m=s.timerDiameter,u=s.timerStroke;1<a.defs.total&&"bar"!=a.defs.timer&&(u="360bar"==a.defs.timer?s.timerStroke:0,n=r=m+2*f+2*u,d=Raphael(a.iviewTimer[0],r,n),a.R=m/2,l={stroke:s.timerBg,"stroke-width":u+2*f},c={stroke:s.timerColor,"stroke-width":u,"stroke-linecap":"round"},p={fill:s.timerColor,stroke:"none","stroke-width":0},h={fill:s.timerBg,stroke:"none","stroke-width":0},d.customAttributes.arc=function(e,i){var t=+e,o=(90-t)*Math.PI/180,s=m/2+f+u,a=m/2+f+u,r=s+i*Math.cos(o),n=a-i*Math.sin(o),d=360==e?[["M",s,a-i],["A",i,i,0,1,1,299.99,a-i]]:[["M",s,a-i],["A",i,i,0,+(180<t),1,r,n]];return{path:d}},d.customAttributes.segment=function(e,i){--i;var t=180<(e=(a=-90)+e)-a,o=m/2+f,s=m/2+f,a=a%360*Math.PI/180;return e=e%360*Math.PI/180,{path:[["M",o,s],["l",i*Math.cos(a),i*Math.sin(a)],["A",i,i,0,+t,1,o+i*Math.cos(e),s+i*Math.sin(e)],["z"]]}},1<a.defs.total&&"pie"==a.defs.timer&&d.circle(a.R+f,a.R+f,a.R+f-1).attr(h),a.timerBgPath=d.path().attr(l),a.timerPath=d.path().attr(c),a.pieTimer=d.path().attr(p)),a.barTimer=b("div",a.iviewTimer),1<a.defs.total&&"360bar"==a.defs.timer&&a.timerBgPath.attr({arc:[359.9,a.R]}),"bar"==a.defs.timer?(a.iviewTimer.css({opacity:s.timerOpacity,width:m,height:u,border:s.timerBarStroke+"px "+s.timerBarStrokeColor+" "+s.timerBarStrokeStyle,padding:f,background:s.timerBg}),a.barTimer.css({width:0,height:u,background:s.timerColor,float:"left"})):a.iviewTimer.css({opacity:s.timerOpacity,width:r,height:n}),a.setTimerPosition(),new v(a.defs.images,function(e){var i=10*e;o.stop().animate({width:i+"%"})},function(){o.stop().animate({width:"100%"},function(){i.remove(),a.startSlider(),s.onAfterLoad.call(this)})}),a.sliderContent.bind("swipeleft",function(){return!a.defs.lock&&(a.cleanTimer(),void a.goTo("next"))}).bind("swiperight",function(){return!a.defs.lock&&(a.cleanTimer(),a.defs.slide-=2,void a.goTo("prev"))}),s.keyboardNav&&b(document).bind("keyup.iView",function(e){if("37"==e.keyCode){if(a.defs.lock)return!1;a.cleanTimer(),a.defs.slide-=2,a.goTo("prev")}if("39"==e.keyCode){if(a.defs.lock)return!1;a.cleanTimer(),a.goTo("next")}}),a.iviewTimer.on("click",function(){a.iviewTimer.hasClass("paused")?a.playSlider():a.stopSlider()}),a.sliderContent.bind("leo_pause",function(){a.stopSlider()}),a.sliderContent.bind("leo_play",function(){a.playSlider()}),a.sliderContent.bind("leo_previous",function(){return!a.defs.lock&&(a.cleanTimer(),a.defs.slide-=2,void a.goTo("prev"))}),a.sliderContent.bind("leo_next",function(){return!a.defs.lock&&(a.cleanTimer(),void a.goTo("next"))}),a.sliderContent.bind("leo_goSlide",function(e,i){return!a.defs.lock&&a.defs.slide!=i&&(!b(this).hasClass("active")&&(a.cleanTimer(),"image"==a.defs.image.data("leo_background")&&(a.slider.css("background",'url("'+a.defs.image.data("leo_image")+'") no-repeat'),a.slider.css("background-size","100%")),"color"==a.defs.image.data("leo_background")&&a.defs.image.data("leo_background_color")!=g&&a.slider.css("background-color",a.defs.image.data("leo_background_color")),a.defs.slide=i-1,void a.goTo("control")))}),a.sliderContent.bind("resize",function(){var e;t=b(this),tW=t.width(),tH=t.height(),r=a.slider.width(),n=a.slider.height(),a.defs.width!=tW&&(a.options.customWidth,r<=a.options.customWidth&&(r=a.options.customWidth,b(".iviewSlider").width(a.options.customWidth)),tW>a.options.customWidth+5&&b(".iviewSlider").css("width","100%"),.985<(e=tW/r)&&(e=1),newHeight=Math.round(a.defs.height*e),1==a.options.rtl?a.slider.css({"-webkit-transform-origin":"100% 0","-moz-transform-origin":"100% 0","-o-transform-origin":"100% 0","-ms-transform-origin":"100% 0","transform-origin":"100% 0","-webkit-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-o-transform":"scale("+e+")","-ms-transform":"scale("+e+")",transform:"scale("+e+")"}):a.slider.css({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+e+")","-moz-transform":"scale("+e+")","-o-transform":"scale("+e+")","-ms-transform":"scale("+e+")",transform:"scale("+e+")"}),t.css({height:newHeight}),a.defs.width=tW,a.setTimerPosition())}),b(".iview-video",a.slider).click(function(e){var i=b(this),t=b(".iview-video-show",i);b(e.target).hasClass("iview-video-close")||b(e.target).hasClass("tp-caption")||b(e.target).parents().hasClass("tp-caption")||(t.show().animate({top:0},1e3,"easeOutBounce"),a.sliderContent.trigger("leo_pause"))}),b(".iview-video-close",a.slider).click(function(){var e=b(this).parents(".iview-video-show"),i=b("iframe",e),t=i.attr("src");i.removeAttr("src").attr("src",t),e.animate({top:"-"+a.defs.height+"px"},1e3,"easeOutBounce",function(){e.hide(),a.sliderContent.trigger("leo_play")})})}o.prototype={timer:null,startSlider:function(){var d=this,e=new Image;if(e.src=d.slides.eq(0).data("leo_image"),imgWidth=e.width,imgWidth!=d.defs.width&&(d.defs.width=imgWidth,d.sliderContent.trigger("resize")),d.iviewTimer.show(),d.slides.eq(d.defs.slide).css("display","block"),"image"==d.defs.image.data("leo_background")&&(d.slider.css("background",'url("'+d.defs.image.data("leo_image")+'") no-repeat'),d.slider.css("background-size","100%")),"color"==d.defs.image.data("leo_background")&&d.defs.image.data("leo_background_color")!=g&&d.slider.css("background-color",d.defs.image.data("leo_background_color")),d.setCaption(d.options),d.iviewTimer.addClass("paused").attr("title",d.options.playLabel),d.options.autoAdvance&&1<d.defs.total&&(d.iviewTimer.removeClass("paused").attr("title",d.options.pauseLabel),d.setTimer()),d.options.directionNav&&(d.sliderContent.append('<div class="iview-directionNav"><a class="iview-prevNav" title="'+d.options.previousLabel+'">'+d.options.previousLabel+'</a><a class="iview-nextNav" title="'+d.options.nextLabel+'">'+d.options.nextLabel+"</a></div>"),b(".iview-directionNav",d.sliderContent).css({opacity:d.options.directionNavHoverOpacity}),d.sliderContent.hover(function(){b(".iview-directionNav",d.sliderContent).stop().animate({opacity:1},300)},function(){b(".iview-directionNav",d.sliderContent).stop().animate({opacity:d.options.directionNavHoverOpacity},300)}),b("a.iview-prevNav",d.sliderContent).on("click",function(){return!d.defs.lock&&(d.cleanTimer(),d.defs.slide-=2,void d.goTo("prev"))}),b("a.iview-nextNav",d.sliderContent).on("click",function(){return!d.defs.lock&&(d.cleanTimer(),void d.goTo("next"))})),d.options.controlNav){var i='<div class="iview-controlNav '+(d.options.controlNavThumbs?"iview-thumbnail":"iview-bullet")+'">',t="";!d.options.directionNav&&d.options.controlNavNextPrev&&(i+='<a class="iview-controlPrevNav" title="'+d.options.previousLabel+'">'+d.options.previousLabel+"</a>"),d.options.customHtmlBullet?i+='<div class="iview-items customHtmlBullet"><ul>':i+='<div class="iview-items"><ul>';for(var o=0;o<d.defs.total;o++){var s,a,r=d.slides.eq(o);i+="<li>",d.options.controlNavThumbs?i+='<a class="iview-control" rel="'+o+'"><img src="'+(s=r.data("leo_thumbnail")?r.data("leo_thumbnail"):r.data("leo_image"))+'" /></a>':(s=r.data("leo_thumbnail")?r.data("leo_thumbnail"):r.data("leo_image"),a="<span>"+(o+1)+"</span>",i+='<a class="iview-control '+d.getSlideData(r,"leo_bullet_class")+'" rel="'+o+'">'+a+" "+d.getSlideData(r,"leo_bullet_description")+"</a>",d.options.controlNavTooltip&&(t+='<div rel="'+o+'"><img src="'+s+'" /></div>')),i+="</li>"}i+="</ul></div>",!d.options.directionNav&&d.options.controlNavNextPrev&&(i+='<a class="iview-controlNextNav" title="'+d.options.nextLabel+'">'+d.options.nextLabel+"</a>"),i+="</div>",!d.options.controlNavThumbs&&d.options.controlNavTooltip&&(i+='<div class="iview-tooltip"><div class="holder"><div class="container">'+t+"</div></div></div>"),d.sliderContent.append(i),b(".iview-controlNav a.iview-control:eq("+d.defs.slide+")",d.sliderContent).addClass("active"),b("a.iview-controlPrevNav",d.sliderContent).one("click",function(){return!d.defs.lock&&(d.cleanTimer(),d.defs.slide-=2,void d.goTo("prev"))}),b("a.iview-controlNextNav",d.sliderContent).on("click",function(){return!d.defs.lock&&(d.cleanTimer(),void d.goTo("next"))}),b(".iview-controlNav a.iview-control",d.sliderContent).on("click",function(){return!d.defs.lock&&(!b(this).hasClass("active")&&(d.cleanTimer(),"image"==d.defs.image.data("leo_background")&&(d.slider.css("background",'url("'+d.defs.image.data("leo_image")+'") no-repeat'),d.slider.css("background-size","100%")),"color"==d.defs.image.data("leo_background")&&d.defs.image.data("leo_background_color")!=g&&d.slider.css("background-color",d.defs.image.data("leo_background_color")),d.defs.slide=b(this).attr("rel")-1,void d.goTo("control")))}),b(".iview-controlNav",d.sliderContent).css({opacity:d.options.controlNavHoverOpacity}),d.sliderContent.hover(function(){b(".iview-controlNav",d.sliderContent).stop().animate({opacity:1},300),d.sliderContent.addClass("iview-hover")},function(){b(".iview-controlNav",d.sliderContent).stop().animate({opacity:d.options.controlNavHoverOpacity},300),d.sliderContent.removeClass("iview-hover")});var l=null;b(".iview-controlNav a.iview-control",d.sliderContent).hover(function(e){var i=b(this),t=i.attr("rel"),o=b(".iview-tooltip",d.sliderContent),s=b("div.holder",o),a=i.offset().left-d.sliderContent.offset().left-o.outerWidth()/2+d.options.tooltipX,r=i.offset().top-d.sliderContent.offset().top-o.outerHeight()+d.options.tooltipY,n=b("div[rel="+t+"]");scrollLeft=t*n.width(),o.stop().animate({left:a,top:r,opacity:1},300),o.not(":visible")&&o.fadeIn(300),s.stop().animate({scrollLeft:scrollLeft},300),clearTimeout(l)},function(e){var i=b(".iview-tooltip",d.sliderContent);l=setTimeout(function(){i.animate({opacity:0},300,function(){i.hide()})},200)})}d.sliderContent.bind("mouseover.iView mousemove.iView",function(){d.options.pauseOnHover&&!d.defs.paused&&d.cleanTimer(),d.sliderContent.addClass("iview-hover")}).bind("mouseout.iView",function(){d.options.pauseOnHover&&!d.defs.paused&&null==d.timer&&d.pieDegree<=359&&d.options.autoAdvance&&d.setTimer(),d.sliderContent.removeClass("iview-hover")})},getSlideData:function(e,i){return e.data(i)!==g?e.data(i):""},setCaption:function(){var h=this,e=h.slides.eq(h.defs.slide),i=b(".tp-caption",e),f=0;i.each(function(e){var i=b(this),t=i.data("transition")?b.trim(i.data("transition").toLowerCase()):"fade",o=i.data("speed")?i.data("speed"):h.options.captionSpeed,s=i.data("easing")?i.data("easing"):h.options.captionEasing,a="undefined"!=i.data("x")?i.data("x"):"center",r="undefined"!=i.data("y")?i.data("y"):"center",n=i.data("width")?i.data("width"):i.outerWidth(),d=i.data("height")?i.data("height"):i.outerHeight(),l=i.outerWidth(),c=i.outerHeight();"center"==a&&(a=h.defs.width/2-l/2),"center"==r&&(r=h.defs.height/2-c/2);var p=b(".caption-contain",i);switch(i.css({opacity:0}),p.css({opacity:0,position:"relative",width:n,height:d}),t){case"wipedown":i.css({top:r-d,left:a}),p.css({top:d+3*d,left:0});break;case"wipeup":i.css({top:r+d,left:a}),p.css({top:d-3*d,left:0});break;case"wiperight":i.css({top:r,left:a-n}),p.css({top:0,left:n+2*n});break;case"wipeleft":i.css({top:r,left:a+n}),p.css({top:0,left:n-2*n});break;case"fade":i.css({top:r,left:a}),p.css({top:0,left:0});break;case"expanddown":i.css({top:r,left:a,height:0}),p.css({top:d+3*d,left:0});break;case"expandup":i.css({top:r+d,left:a,height:0}),p.css({top:d-3*d,left:0});break;case"expandright":i.css({top:r,left:a,width:0}),p.css({top:0,left:n+2*n});break;case"expandleft":i.css({top:r,left:a+n,width:0}),p.css({top:0,left:n-2*n})}setTimeout(function(){i.animate({opacity:h.options.captionOpacity,top:r,left:a,width:n,height:d},o,s,function(){})},f),setTimeout(function(){p.animate({opacity:h.options.captionOpacity,top:0,left:0},o,s)},f+100),f+=250})},processTimer:function(){var e,i=this;"360bar"==i.defs.timer?(e=0==i.pieDegree?0:i.pieDegree+.9,i.timerPath!=g&&i.timerPath.attr({arc:[e,i.R]})):"pie"==i.defs.timer?(e=0==i.pieDegree?0:i.pieDegree+.9,i.timerPath!=g&&i.pieTimer.attr({segment:[e,i.R]})):i.barTimer.css({width:i.pieDegree/360*100+"%"}),i.pieDegree+=3},transitionEnd:function(e){e.options.onAfterChange.call(this),e.defs.lock=!1,e.slides.css("display","none"),e.slides.eq(e.defs.slide).show(),"image"==e.defs.image.data("leo_background")&&(e.slider.css("background",'url("'+e.defs.image.data("leo_image")+'") no-repeat'),e.slider.css("background-size","100%")),"color"==e.defs.image.data("leo_background")&&e.defs.image.data("leo_background_color")!=g&&e.slider.css("background-color",e.defs.image.data("leo_background_color")),b(".iview-strip, .iview-block",".iviewSlider").remove(),e.defs.time=e.options.pauseTime&&0!=e.options.pauseTime?e.options.pauseTime:5e3,e.iviewTimer.animate({opacity:e.options.timerOpacity}),e.pieDegree=0,e.processTimer(),e.setCaption(e.options),null!=e.timer||e.defs.paused||(e.timer=setInterval(function(){e.timerCall(e)},e.defs.time/120))},addStrips:function(e,i){var t=this;i=i||t.options;for(var o=0;o<i.strips;o++){var s,a,r,n=Math.round(t.slider.width()/i.strips),d=Math.round(t.slider.height()/i.strips),l="-"+(n+o*n-n)+"px 0%",c=e?d*o+"px":"0px",p=e?"0px":n*o+"px";e&&(l="0% -"+(d+o*d-d)+"px"),a=o==i.strips-1?(s=e?"0px":t.slider.width()-n*o+"px",e?t.slider.height()-d*o+"px":"0px"):(s=e?"0px":n+"px",e?d+"px":"0px"),"image"==t.defs.image.data("leo_background")&&(r=b('<div class="iview-strip"></div>').css({width:s,height:a,top:c,left:p,background:'url("'+t.defs.image.data("leo_image")+'") no-repeat '+l,"background-size":"100%",opacity:0})),"color"==t.defs.image.data("leo_background")&&(r=b('<div class="iview-strip"></div>').css({width:s,height:a,top:c,left:p,"background-size":"100%",opacity:0})),t.slider.append(r)}},addBlocks:function(){for(var e=this,i=Math.round(e.slider.width()/e.options.blockCols),t=Math.round(e.slider.height()/e.options.blockRows),o=0;o<e.options.blockRows;o++)for(var s=0;s<e.options.blockCols;s++){var a,r="-"+(i+s*i-i)+"px -"+(t+o*t-t)+"px";s==e.options.blockCols-1&&e.slider.width(),"image"==e.defs.image.data("leo_background")&&(a=b('<div class="iview-block"></div>').css({width:i+"px",height:t+"px",top:o*t+"px",left:s*i+"px",background:'url("'+e.defs.image.data("leo_image")+'") no-repeat '+r,"background-size":"100%",opacity:0})),"color"==e.defs.image.data("leo_background")&&(a=b('<div class="iview-block"></div>').css({width:i+"px",height:t+"px",top:o*t+"px",left:s*i+"px",background:'url("'+e.defs.image.data("leo_image")+'") no-repeat '+r,"background-size":"100%",opacity:0})),e.slider.append(a)}},runTransition:function(a){var r=this;switch(a){case"strip-up-right":case"strip-up-left":r.addStrips();var n=0;o=0,e=b(".iview-strip",r.slider),"strip-up-left"==a&&(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this);e.css({top:"",bottom:"0px"}),setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++})},100+n),n+=50});break;case"strip-down":case"strip-down-right":case"strip-down-left":r.addStrips();var n=0,o=0,e=b(".iview-strip",r.slider);"strip-down-left"==a&&(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this);e.css({bottom:"",top:"0px"}),setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++})},100+n),n+=50});break;case"strip-left-right":case"strip-left-right-up":case"strip-left-right-down":r.addStrips(!0);var n=0,o=0,i=0,e=b(".iview-strip",r.slider);"strip-left-right-down"==a&&(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this);0==o?(e.css({right:"",left:"0px"}),o++):(e.css({left:"",right:"0px"}),o=0),setTimeout(function(){e.animate({width:"100%",opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){i==r.options.strips-1&&r.transitionEnd(r),i++})},100+n),n+=50});break;case"strip-up-down":case"strip-up-down-right":case"strip-up-down-left":r.addStrips();n=0,o=0,i=0,e=b(".iview-strip",r.slider);"strip-up-down-left"==a&&(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this);0==o?(e.css({bottom:"",top:"0px"}),o++):(e.css({top:"",bottom:"0px"}),o=0),setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){i==r.options.strips-1&&r.transitionEnd(r),i++})},100+n),n+=50});break;case"left-curtain":case"right-curtain":case"top-curtain":case"bottom-curtain":"left-curtain"==a||"right-curtain"==a?r.addStrips():r.addStrips(!0);n=0,o=0,e=b(".iview-strip",r.slider);"right-curtain"!=a&&"bottom-curtain"!=a||(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this),i=e.width(),t=e.height();"left-curtain"==a||"right-curtain"==a?e.css({top:"0px",height:"100%",width:"0px"}):e.css({left:"0px",height:"0px",width:"100%"}),setTimeout(function(){"left-curtain"==a||"right-curtain"==a?e.animate({width:i,opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++}):e.animate({height:t,opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++})},100+n),n+=50});break;case"strip-up-right":case"strip-up-left":r.addStrips();n=0,o=0,e=b(".iview-strip",r.slider);"strip-up-left"==a&&(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this);e.css({bottom:"0px"}),setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++})},100+n),n+=50});break;case"strip-left-fade":case"strip-right-fade":case"strip-top-fade":case"strip-bottom-fade":"strip-left-fade"==a||"strip-right-fade"==a?r.addStrips():r.addStrips(!0);n=0,o=0,e=b(".iview-strip",r.slider);"strip-right-fade"!=a&&"strip-bottom-fade"!=a||(e=b(".iview-strip",r.slider).reverse()),e.each(function(){var e=b(this),i=e.width(),t=e.height();"strip-left-fade"==a||"strip-right-fade"==a?e.css({top:"0px",height:"100%",width:i}):e.css({left:"0px",height:t,width:"100%"}),setTimeout(function(){e.animate({opacity:"1.0"},1.7*r.options.animationSpeed,r.defs.easing,function(){o==r.options.strips-1&&r.transitionEnd(r),o++})},100+n),n+=35});break;case"slide-in-up":case"slide-in-down":opts={strips:1},r.addStrips(!1,opts);var t=b(".iview-strip:first",r.slider),s=0,s="slide-in-up"==a?"-"+r.defs.height+"px":r.defs.height+"px";t.css({top:s,height:"100%",width:"100%"}),t.animate({top:"0px",opacity:1},2*r.options.animationSpeed,r.defs.easing,function(){r.transitionEnd(r)});break;case"zigzag-top":case"zigzag-bottom":case"zigzag-grow-top":case"zigzag-grow-bottom":case"zigzag-drop-top":case"zigzag-drop-bottom":r.addBlocks();for(var d=r.options.blockCols*r.options.blockRows,n=0,l=new Array,c=b(".iview-block",r.slider),p=0;p<r.options.blockRows;p++){var h=p%2,f=p*r.options.blockCols,m=(p+1)*r.options.blockCols;if(1==h)for(var u=m-1;f<=u;u--)l.push(b(c[u]));else for(u=f;u<m;u++)l.push(b(c[u]))}"zigzag-bottom"!=a&&"zigzag-grow-bottom"!=a&&"zigzag-drop-bottom"!=a||l.reverse(),c.each(function(e){var i=b(l[e]),t=i.height(),o=i.width(),s=i.css("top");"zigzag-grow-top"==a||"zigzag-grow-bottom"==a?i.width(0).height(0):"zigzag-drop-top"!=a&&"zigzag-drop-bottom"!=a||i.css({top:"-=50"}),setTimeout(function(){"zigzag-grow-top"==a||"zigzag-grow-bottom"==a?i.animate({opacity:"1",height:t,width:o},r.options.animationSpeed,r.defs.easing,function(){e==d-1&&r.transitionEnd(r)}):"zigzag-drop-top"==a||"zigzag-drop-bottom"==a?i.animate({top:s,opacity:"1"},r.options.animationSpeed,r.defs.easing,function(){e==d-1&&r.transitionEnd(r)}):i.animate({opacity:"1"},2*r.options.animationSpeed,"easeInOutExpo",function(){e==d-1&&r.transitionEnd(r)})},100+n),n+=20});break;case"block-fade":case"block-fade-reverse":case"block-expand":case"block-expand-reverse":r.addBlocks();var d=r.options.blockCols*r.options.blockRows,o=0,n=0,g=0,v=0;(l=new Array)[g]=new Array;c=b(".iview-block",r.slider);"block-fade-reverse"!=a&&"block-expand-reverse"!=a||(c=b(".iview-block",r.slider).reverse()),c.each(function(){l[g][v]=b(this),++v==r.options.blockCols&&(v=0,l[++g]=new Array)});for(u=0;u<2*r.options.blockCols;u++){for(var w=u,p=0;p<r.options.blockRows;p++)0<=w&&w<r.options.blockCols&&function(){var e=b(l[p][w]),i=e.width(),t=e.height();"block-expand"!=a&&"block-expand-reverse"!=a||e.width(0).height(0),setTimeout(function(){e.animate({opacity:"1",width:i,height:t},r.options.animationSpeed/1.3,r.defs.easing,function(){o==d-1&&r.transitionEnd(r),o++})},100+n)}(),w--;n+=100}break;case"block-random":case"block-expand-random":case"block-drop-random":r.addBlocks();d=r.options.blockCols*r.options.blockRows,n=0;(c=r.shuffle(b(".iview-block",r.slider))).each(function(e){var i=b(this),t=i.height(),o=i.width(),s=i.css("top");"block-expand-random"==a&&i.width(0).height(0),"block-drop-random"==a&&i.css({top:"-=50"}),setTimeout(function(){i.animate({top:s,opacity:"1",height:t,width:o},r.options.animationSpeed,r.defs.easing,function(){e==d-1&&r.transitionEnd(r)})},100+n),n+=20});break;case"slide-in-right":case"slide-in-left":case"fade":default:opts={strips:1},r.addStrips(!1,opts),(t=b(".iview-strip:first",r.slider)).css({height:"100%",width:"100%"}),"slide-in-right"==a?t.css({height:"100%",width:"100%",left:r.defs.width+"px",right:""}):"slide-in-left"==a&&t.css({left:"-"+r.defs.width+"px"}),t.animate({left:"0px",opacity:1},2*r.options.animationSpeed,r.defs.easing,function(){r.transitionEnd(r)})}},shuffle:function(e){for(var i=e.slice(),t=i.length,o=t;o--;){var s=parseInt(Math.random()*t),a=i[o];i[o]=i[s],i[s]=a}return i},timerCall:function(e){e.processTimer(),360<=e.pieDegree&&(e.cleanTimer(),e.goTo(!1))},setTimer:function(){var e=this;e.timer=setInterval(function(){e.timerCall(e)},e.defs.time/120)},cleanTimer:function(){clearInterval(this.timer),this.timer=null},goTo:function(e){var i,t,o=this;o.defs&&o.defs.slide==o.defs.total-1&&o.options.onLastSlide.call(this),o.cleanTimer(),o.iviewTimer.animate({opacity:0}),o.options.onBeforeChange.call(this),e&&"prev"!=e&&"next"!=e||("image"==o.defs.image.data("leo_background")&&(o.slider.css("background",'url("'+o.defs.image.data("leo_image")+'") no-repeat'),o.slider.css("background-size","100%")),"color"==o.defs.image.data("leo_background")&&o.defs.image.data("leo_background_color")!=g&&o.slider.css("background-color",o.defs.image.data("leo_background_color"))),o.defs.slide++,o.defs.slide==o.defs.total&&(o.defs.slide=0,o.options.onSlideShowEnd.call(this)),o.defs.slide<0&&(o.defs.slide=o.defs.total-1),o.defs.image=o.slides.eq(o.defs.slide),1==o.options.timer_show&&(o.playSlider(),b(".iview-timer").hide()),2==o.options.timer_show&&(o.stopSlider(),b(".iview-timer").hide()),3==o.options.timer_show&&(b(".iview-timer").show(),o.playSlider()),"video"==o.defs.image.data("leo_type")&&(b(".iview-video",o.slider).trigger("click"),b(".iview-video-close").hide(),b(".iview-timer").hide()),1==o.defs.image.data("autoplay")&&(i=b(".iviewSlider").children().eq(o.defs.slide),t=b("iframe",i).attr("src"),b("iframe",i).attr("src",t+"&autoplay=1")),o.options.controlNav&&(b(".iview-controlNav a.iview-control",o.sliderContent).removeClass("active"),b(".iview-controlNav a.iview-control:eq("+o.defs.slide+")",o.sliderContent).addClass("active"));var s,a=o.options.fx;"random"==o.options.fx.toLowerCase()&&((a=(s=new Array("left-curtain","right-curtain","top-curtain","bottom-curtain","strip-down-right","strip-down-left","strip-up-right","strip-up-left","strip-up-down","strip-up-down-left","strip-left-right","strip-left-right-down","slide-in-right","slide-in-left","slide-in-up","slide-in-down","fade","strip-left-fade","strip-right-fade","strip-top-fade","strip-bottom-fade"))[Math.floor(Math.random()*(s.length+1))])==g&&(a="fade"),a=b.trim(a.toLowerCase())),-1!=o.options.fx.indexOf(",")&&((a=(s=o.options.fx.split(","))[Math.floor(Math.random()*s.length)])==g&&(a="fade"),a=b.trim(a.toLowerCase())),o.defs.image.data("leo_transition")&&(a=(s=o.defs.image.data("leo_transition").split(","))[Math.floor(Math.random()*s.length)],a=b.trim(a.toLowerCase())),o.defs.easing=o.defs.image.data("leo_easing")?o.defs.image.data("leo_easing"):o.options.easing,o.defs.lock=!0,o.runTransition(a)},playSlider:function(){var e=this;null==e.timer&&e.defs.paused&&(e.iviewTimer.removeClass("paused").attr("title",e.options.pauseLabel),e.setTimer(),e.defs.paused=!1,e.options.onPlay.call(this))},stopSlider:function(){var e=this;e.iviewTimer.addClass("paused").attr("title",e.options.playLabel),e.cleanTimer(),e.defs.paused=!0,e.options.onPause.call(this)},setTimerPosition:function(){for(var e=this,i=e.options.timerPosition.toLowerCase().split("-"),t=0;t<i.length;t++)"top"==i[t]?e.iviewTimer.css({top:e.options.timerY+"px",bottom:""}):"middle"==i[t]?e.iviewTimer.css({top:e.options.timerY+e.defs.height/2-e.options.timerDiameter/2+"px",bottom:""}):"bottom"==i[t]?e.iviewTimer.css({bottom:e.options.timerY+"px",top:""}):"left"==i[t]?e.iviewTimer.css({left:e.options.timerX+"px",right:""}):"center"==i[t]?e.iviewTimer.css({left:e.options.timerX+e.defs.width/2-e.options.timerDiameter/2+"px",right:""}):"right"==i[t]&&e.iviewTimer.css({right:e.options.timerX+"px",left:""})},disableSelection:function(e){void 0!==e.onselectstart?e.onselectstart=function(){return!1}:void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.webkitUserSelect?e.style.webkitUserSelect="none":void 0!==e.style.userSelect?e.style.userSelect="none":e.onmousedown=function(){return!1},e.unselectable="on"},isTouch:function(){return!!("ontouchstart"in i)}};var v=function(e,i,t){this.m_pfnPercent=i,this.m_pfnFinished=t,this.m_nLoaded=0,this.m_nProcessed=0,this.m_aImages=new Array,this.m_nICount=e.length;for(var o=0;o<e.length;o++)this.Preload(e[o])};v.prototype={Preload:function(e){var i=new Image;this.m_aImages.push(i),i.onload=v.prototype.OnLoad,i.onerror=v.prototype.OnError,i.onabort=v.prototype.OnAbort,i.oImagePreload=this,i.bLoaded=!1,i.source=e,i.src=e},OnComplete:function(){this.m_nProcessed++,this.m_nProcessed==this.m_nICount?this.m_pfnFinished():this.m_pfnPercent(Math.round(this.m_nProcessed/this.m_nICount*10))},OnLoad:function(){this.bLoaded=!0,this.oImagePreload.m_nLoaded++,this.oImagePreload.OnComplete()},OnError:function(){this.bError=!0,this.oImagePreload.OnComplete()},OnAbort:function(){this.bAbort=!0,this.oImagePreload.OnComplete()}},b.fn.iView=function(i){i=jQuery.extend({fx:"random",easing:"easeOutQuad",strips:20,blockCols:10,blockRows:5,animationSpeed:500,pauseTime:5e3,startSlide:0,directionNav:!0,directionNavHoverOpacity:.6,controlNav:!1,controlNavNextPrev:!0,controlNavHoverOpacity:.6,controlNavThumbs:!1,controlNavTooltip:!0,captionSpeed:500,captionEasing:"easeInOutSine",captionOpacity:1,autoAdvance:!0,keyboardNav:!0,touchNav:!0,pauseOnHover:!1,nextLabel:"Next",previousLabel:"Previous",playLabel:"Play",pauseLabel:"Pause",closeLabel:"Close",randomStart:!1,timer:"Pie",timerBg:"#000",timerColor:"#EEE",timerOpacity:.5,timerDiameter:30,timerPadding:4,timerStroke:3,timerBarStroke:1,timerBarStrokeColor:"#EEE",timerBarStrokeStyle:"solid",timerPosition:"top-right",timerX:10,timerY:10,tooltipX:5,tooltipY:-5,onBeforeChange:function(){},onAfterChange:function(){},onAfterLoad:function(){},onLastSlide:function(){},onSlideShowEnd:function(){},onPause:function(){},onPlay:function(){}},i),b(this).each(function(){var e=b(this);new o(e,i)})},b.fn.reverse=[].reverse;var s,a=b([]),r=b.resize=b.extend(b.resize,{}),n="setTimeout",d="resize",l=d+"-special-event",c="delay",p="throttleWindow";r[c]=250,r[p]=!0,b.event.special[d]={setup:function(){if(!r[p]&&this[n])return!1;var e=b(this);a=a.add(e),b.data(this,l,{w:e.width(),h:e.height()}),1===a.length&&function e(){s=i[n](function(){a.each(function(){var e=b(this),i=e.width(),t=e.height(),o=b.data(this,l);i===o.w&&t===o.h||e.trigger(d,[o.w=i,o.h=t])}),e()},r[c])}()},teardown:function(){if(!r[p]&&this[n])return!1;var e=b(this);a=a.not(e),e.removeData(l),a.length||clearTimeout(s)},add:function(e){if(!r[p]&&this[n])return!1;var a;function i(e,i,t){var o=b(this),s=b.data(this,l);s!==g&&(s.w=i!==g?i:o.width(),s.h=t!==g?t:o.height()),a.apply(this,arguments)}if(b.isFunction(e))return a=e,i;a=e.handler,e.handler=i}};var e=!!("ontouchstart"in i),h=e?"touchstart":"mousedown",f=e?"touchend":"mouseup",m=e?"touchmove":"mousemove";b.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var a=b(this);a.bind(h,function(e){var t,i=e.originalEvent.touches?e.originalEvent.touches[0]:e,o={time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:b(e.target)};function s(e){var i;o&&(i=e.originalEvent.touches?e.originalEvent.touches[0]:e,t={time:(new Date).getTime(),coords:[i.pageX,i.pageY]},Math.abs(o.coords[0]-t.coords[0])>b.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}a.bind(m,s).one(f,function(e){a.unbind(m,s),o&&t&&t.time-o.time<b.event.special.swipe.durationThreshold&&Math.abs(o.coords[0]-t.coords[0])>b.event.special.swipe.horizontalDistanceThreshold&&Math.abs(o.coords[1]-t.coords[1])<b.event.special.swipe.verticalDistanceThreshold&&o.origin.trigger("swipe").trigger(o.coords[0]>t.coords[0]?"swipeleft":"swiperight"),o=t=g})})}},b.each({swipeleft:"swipe",swiperight:"swipe"},function(e,i){b.event.special[e]={setup:function(){b(this).bind(i,b.noop)}}})}(jQuery,this);